{
  "id": "/${marathon-group}/jobtracking",
  "cpus": "${jobtracking-cpus}",
  "mem": "${jobtracking-mem}",
  "dependencies": ["/${marathon-group}/${rabbit-id}"],
  "instances": "${jobtracking-autoscale.mininstances}",
  "container": {
    "type": "DOCKER",
    "docker": {
      "image": "${docker-registry}/caf/worker-jobtracking:${jobtracking-version}",
      "network": "BRIDGE",
      "forcePullImage": "${force-pull}",
      "portMappings": [
        {
          "containerPort": 8080,
          "hostPort": 0,
          "protocol": "tcp",
          "servicePort": "${jobtracking-8080-serviceport}"
        },
        {
          "containerPort": 8081,
          "hostPort": 0,
          "protocol": "tcp",
          "servicePort": "${jobtracking-8081-serviceport}"
        }
      ],
      "privileged": true
    },
    "volumes": [
      {
        "containerPath": "/etc/store",
        "hostPath": "${caf-fs-storage-hostPath}",
        "mode": "RW"
      }
    ]
  },
  "env": {
    "_JAVA_OPTIONS": "-Xms${jobtracking-java-mem-min}m -Xmx${jobtracking-java-mem-max}m",
    "CAF_CONFIG_PATH": "/mnt/mesos/sandbox",
    "JOB_DATABASE_URL": "${jobtracking-database-url}",
    "JOB_DATABASE_USERNAME": "${jobtracking-database-username}",
    "JOB_DATABASE_PASSWORD": "${jobtracking-database-password}"
  },
  "healthChecks": [
    {
      "path": "/healthcheck",
      "protocol": "HTTP",
      "portIndex": 1,
      "gracePeriodSeconds": "${jobtracking-healthcheck-graceperiodseconds}",
      "intervalSeconds": "${jobtracking-healthcheck-intervalseconds}",
      "maxConsecutiveFailures": "${jobtracking-healthcheck-maxconsecutivefailures}",
      "timeoutSeconds": "${jobtracking-healthcheck-timeoutseconds}"
    }
  ],
  "labels": {
    "autoscale.maxinstances": "${jobtracking-autoscale.maxinstances}",
    "autoscale.metric": "${jobtracking-autoscale.metric}",
    "autoscale.mininstances": "${jobtracking-autoscale.mininstances}",
    "autoscale.scalingprofile": "${jobtracking-autoscale.scalingprofile}",
    "autoscale.scalingtarget": "${marathon-group}-jobtracking-in"
  },
  "uris": [
    "${marathon-uris-root}/${worker-config-location}/cfg_${marathon-group}_jobtracking_JobTrackingWorkerConfiguration",
    "${marathon-uris-root}/${worker-config-location}/cfg_${marathon-group}_jobtracking_RabbitWorkerQueueConfiguration",
    "${marathon-uris-root}/${worker-config-location}/cfg_${marathon-group}_jobtracking_FileSystemDataStoreConfiguration",
    "${marathon-uris-root}/${docker-login-config}"
  ]
}