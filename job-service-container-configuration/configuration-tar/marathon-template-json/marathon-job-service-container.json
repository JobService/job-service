{
  "id": "/${marathon-group}/job-service",
  "cpus": "${job-service-cpus}",
  "mem": "${job-service-mem}",
  "instances": "${job-service-instances}",
  "container": {
    "docker": {
      "image": "${docker-registry}/caf/job-service:${job-service-version}",
      "network": "BRIDGE",
      "portMappings": [
        {
          "containerPort": 8080,
          "hostPort": 0,
          "protocol": "tcp",
          "servicePort": "${job-service-8080-serviceport}"
        }
      ],
      "privileged": true,
      "force-pull": "${force-pull}"
    },
    "type": "DOCKER"
  },
  "healthChecks": [
    {
      "protocol": "HTTP",
      "gracePeriodSeconds": "${job-service-healthcheck-graceperiodseconds}",
      "intervalSeconds": "${job-service-healthcheck-intervalseconds}",
      "maxConsecutiveFailures": "${job-service-healthcheck-maxconsecutivefailures}",
      "path": "/",
      "timeoutSeconds": "${job-service-healthcheck-timeoutseconds}"
    }
  ],
  "env": {
    "_JAVA_OPTIONS": "-Xms${job-service-java-mem-min}m -Xmx${job-service-java-mem-max}m",
    "CAF_CONFIG_PATH": "/mnt/mesos/sandbox",
    "CAF_DATABASE_URL": "${job-service-database.url}",
    "CAF_DATABASE_USERNAME": "${job-service-database.username}",
    "CAF_DATABASE_PASSWORD": "${job-service-database.password}",
    "CAF_TRACKING_PIPE": "${job-service-tracking-pipe}",
    "CAF_STATUS_CHECK_TIME": "${job-service-status-check-time}",
    "CAF_WEBSERVICE_URL": "${job-service-web-service-url}",
    "CAF_RABBITMQ_HOST": "${rabbit-host}",
    "CAF_RABBITMQ_PORT": "${rabbit-port}",
    "CAF_RABBITMQ_USERNAME": "${rabbit-user}",
    "CAF_RABBITMQ_PASSWORD": "${rabbit-password}"
  },
  "uris": [
    "${marathon-uris-root}/${docker-login-config}"
  ]
}

